<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Instrumentation · Hot Chocolate</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="The _Hot Chocolate_ instrumentation allows you to receive internal instrumentation events and process them further. Instrumentation events are provided through a `DiagnosticSource`."/><meta name="docsearch:version" content="10.0.0-rc.3"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Instrumentation · Hot Chocolate"/><meta property="og:type" content="website"/><meta property="og:url" content="https://hotchocolate.io/"/><meta property="og:description" content="The _Hot Chocolate_ instrumentation allows you to receive internal instrumentation events and process them further. Instrumentation events are provided through a `DiagnosticSource`."/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://hotchocolate.io/img/cupcake.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai-sublime.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-72800164-3', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster:700,400"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/signet.svg" alt="Hot Chocolate"/><h2 class="headerTitleWithLogo">Hot Chocolate</h2></a><a href="/versions"><h3>10.0.0-rc.3</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/10.0.0-rc.3/introduction" target="_self">Docs</a></li><li class=""><a href="/docs/10.0.0-rc.3/example-star-wars-code-first" target="_self">Examples</a></li><li class=""><a href="https://chillicream.com/blog" target="_blank">Blog</a></li><li class=""><a href="https://shop.chillicream.com" target="_blank">Shop</a></li><li class=""><a href="https://github.com/ChilliCream/hotchocolate" target="_blank">GitHub</a></li><li class=""><a target="_self"></a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>API Reference</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Introduction<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/code-first">Code-first</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/schema-first">Schema-first</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">API Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Schema Definition</h4><ul><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/schema">Schema</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/schema-object-type">Object Type</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/schema-interface-type">Interface Type</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/schema-union-type">Union Type</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/schema-input-object-type">Input Object Type</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/schema-enum-type">Enum Type</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/schema-descriptions">Schema Descriptions</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/custom-scalar-types">Scalar Type Support</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/resolvers">Resolvers</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/dataloaders">Data Loaders</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/pagination">Pagination</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/filters">Filter Support</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/dependency-injection">Dependency Injection</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/authorization">Authorization</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/middleware">Middleware</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/custom-context">Custom Context Data</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/code-first-subscription">Subscriptions</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/options">Options</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/type-conversion">Type Conversion</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/aspnet">ASP.NET</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/parser">Parser</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/errors">Error Filter</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/security">Security</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/validation-rule">Validation Rules</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/stitching">Schema Stitching</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/10.0.0-rc.3/instrumentation">Instrumentation</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/apollo-tracing">Apollo Tracing</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/conventions">Conventions</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/extending-types">Extending Types</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/relay">Relay</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/batching">Batching</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/persisted-queries">Persisted Queries</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Guides<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/migration">Migrating from 0.6.x</a></li><li class="navListItem"><a class="navItem" href="/docs/10.0.0-rc.3/dotnet-cli">.NET CLI</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/ChilliCream/hotchocolate-docs/edit/master/docs/instrumentation.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Instrumentation</h1></header><article><div><span><p>The <em>Hot Chocolate</em> instrumentation allows you to receive internal instrumentation events and process them further. Instrumentation events are provided through a <code>DiagnosticSource</code>.</p>
<p>Using Microsoft`s <code>DiagnosticSource</code> API allows us to provide rich events without compromising on information detail.</p>
<p>As a developer using <em>Hot Chocolate</em> we can subscribe to those events and delegate them either to our logging provider or to another tracing infrastructure for further processing.</p>
<p>This allows us to just take the information we need for a certain logging solution and for instance craft the events provided by <em>Hot Chocolate</em> into logging messages that fit our project.</p>
<h2><a class="anchor" aria-hidden="true" id="events"></a><a href="#events" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Events</h2>
<p>First let us have a look at what events <em>Hot Chocolate</em> currently provides and what they mean. Later we will walk you through how to setup an <code>IDiagnosticObserver</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="query-events"></a><a href="#query-events" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Query Events</h3>
<p>Query events are raised per request. This means that for each query request that we fire up against a <em>Hot Chocolate</em> one query event is raised.</p>
<p>The following query events are available:</p>
<h4><a class="anchor" aria-hidden="true" id="start-query"></a><a href="#start-query" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Start Query</h4>
<p>The start event is raised once the query engine receives a request.</p>
<pre><code class="hljs css language-csharp"><span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query.Start"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">BeginQueryExecute</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ... your code</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The query context that we provide as payload with the event is the full query context on which the query middleware operates. This enables us to pick and choose the information that we want.</p>
<h4><a class="anchor" aria-hidden="true" id="stop-query"></a><a href="#stop-query" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stop Query</h4>
<p>The stop event is raised once the query engine has completed processing the request. This event is even called if an error has occurred. Additional to the <code>IQueryContext</code> the event also provides the <code>IExecutionResult</code>.</p>
<pre><code class="hljs css language-csharp"><span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query.Stop"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">EndQueryExecute</span><span class="token punctuation">(</span>
    <span class="token class-name">IQueryContext</span> context<span class="token punctuation">,</span>
    <span class="token class-name">IExecutionResult</span> result<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ... your code</span>
<span class="token punctuation">}</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="query-error"></a><a href="#query-error" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Query Error</h4>
<p>The error event is raised should there be an unhandled exception on the query middleware level. This event is not raised whenever a validation or field error is thrown.</p>
<pre><code class="hljs css language-csharp"><span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query.Error"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnQueryError</span><span class="token punctuation">(</span>
    <span class="token class-name">IQueryContext</span> context<span class="token punctuation">,</span>
    <span class="token class-name">Exception</span> exception<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ... your code</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="parser-events"></a><a href="#parser-events" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parser Events</h3>
<p>The parser events are raised when the parser middleware is invoked. It is important to know that the <em>Hot Chocolate</em> server caches queries. This means that only the first time a query is executed, we can measure the parsing time.</p>
<h4><a class="anchor" aria-hidden="true" id="start-parsing"></a><a href="#start-parsing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Start Parsing</h4>
<p>The start event is raised once the parser middleware is invoked.</p>
<pre><code class="hljs css language-csharp"><span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Parsing.Start"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">BeginParsing</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ... your code</span>
<span class="token punctuation">}</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="stop-parsing"></a><a href="#stop-parsing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stop Parsing</h4>
<p>The stop event is raised once the parser finished. It is important to know that the stop event is even raised if a <code>SyntaxException</code> is thrown. The <code>Document</code> property on the <code>IQueryContext</code> will be null in this case. The parser middleware will add a property to the context data indicating if the query was retrieved from the cache: <code>DocumentRetrievedFromCache</code>.</p>
<pre><code class="hljs css language-csharp"><span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Parsing.Stop"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">EndParsing</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ... your code</span>
<span class="token punctuation">}</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="parsing-errors"></a><a href="#parsing-errors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parsing Errors</h4>
<p>The parser will throw a <code>SyntaxException</code> if the query is not syntactically correct. The <code>SyntaxException</code> will cause a query error.</p>
<h3><a class="anchor" aria-hidden="true" id="validation-events"></a><a href="#validation-events" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Validation Events</h3>
<p>The validation events are raised whenever the validation middleware is invoked. Like with the parsing middleware the validation middleware will cache validation results. This means that only the first validation of a query document can be used to measure the validation duration. The context property <code>DocumentRetrievedFromCache</code> can also be used in this case to detect if the validation result was pulled from the internal cache or if it was computed.</p>
<h4><a class="anchor" aria-hidden="true" id="validation-start"></a><a href="#validation-start" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Validation Start</h4>
<p>The validation start event is called once the validation middleware is invoked.</p>
<pre><code class="hljs css language-csharp"><span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Validation.Start"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">BeginValidation</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ... your code</span>
<span class="token punctuation">}</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="validation-stop"></a><a href="#validation-stop" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Validation Stop</h4>
<p>The stop event is raised once the validation finished. It is important to know that the stop event is even raised if a validation error is raised.</p>
<pre><code class="hljs css language-csharp"><span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Validation.Stop"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">EndValidation</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ... your code</span>
<span class="token punctuation">}</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="validation-errors"></a><a href="#validation-errors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Validation Errors</h4>
<p>The validation error event will be raised for each query document analysis that yields at least one error.</p>
<pre><code class="hljs css language-csharp"><span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Validation.Error"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">OnValidationError</span><span class="token punctuation">(</span>
    <span class="token class-name">IQueryContext</span> context<span class="token punctuation">,</span>
    IReadOnlyCollection<span class="token operator">&lt;</span>IError<span class="token operator">></span> errors<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ... your code</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="operation-events"></a><a href="#operation-events" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Operation Events</h3>
<p>Operation events represent the execution of the operation by the query engine. At this point all information about the operation have been resolved and can be accessed.</p>
<p>The following operation events are available:</p>
<h4><a class="anchor" aria-hidden="true" id="start-operation"></a><a href="#start-operation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Start Operation</h4>
<pre><code class="hljs css language-csharp"><span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Operation.Start"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">BeginOperationExecute</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ... your code</span>
<span class="token punctuation">}</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="stop-operation"></a><a href="#stop-operation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stop Operation</h4>
<pre><code class="hljs css language-csharp"><span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Operation.Stop"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">EndOperationExecute</span><span class="token punctuation">(</span>
    <span class="token class-name">IQueryContext</span> context<span class="token punctuation">,</span>
    <span class="token class-name">IExecutionResult</span> result<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ... your code</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="resolver-events"></a><a href="#resolver-events" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resolver Events</h3>
<p>Resolver events are raised for every single resolver that is invoked. This is the perfect event to subscribe to if you want to add performance analysis or other resolver tracing solutions.</p>
<blockquote>
<p>Have a look at our <a href="https://github.com/ChilliCream/hotchocolate/blob/master/src/Core/Core/Execution/Instrumentation/ApolloTracingDiagnosticObserver.cs">ApolloTracingDiagnosticObserver</a> to get an idea of how to implement a perfomance anlysis solution.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="resolver-start"></a><a href="#resolver-start" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resolver Start</h4>
<p>The resolver start event is raised for each invocation of a resolver pipeline. The resolver pipeline is made-up of multiple field middleware components. The exact composition of such a pipeline varies on your setup.</p>
<pre><code class="hljs css language-csharp"><span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Resolver.Start"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">BeginResolveField</span><span class="token punctuation">(</span><span class="token class-name">IResolverContext</span> context<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ... your code</span>
<span class="token punctuation">}</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="resolver-stop"></a><a href="#resolver-stop" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resolver Stop</h4>
<p>The resolver stop event is raised once the execution of the resolver pipeline is completed. The provided result is the not completed result of the resolver. This means that the actual result that is integrated into the query result can differ since type converter and serialization are applied during field value completion.</p>
<pre><code class="hljs css language-csharp"><span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Resolver.Stop"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">EndResolveField</span><span class="token punctuation">(</span>
    <span class="token class-name">IResolverContext</span> context<span class="token punctuation">,</span>
    <span class="token keyword">object</span> result<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ... your code</span>
<span class="token punctuation">}</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="resolver-error"></a><a href="#resolver-error" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resolver Error</h4>
<p>The resolver error event is raised should one or more resolver errors occurs.</p>
<pre><code class="hljs css language-csharp"><span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Resolver.Error"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">OnResolverError</span><span class="token punctuation">(</span>
    <span class="token class-name">IResolverContext</span> context<span class="token punctuation">,</span>
    IEnumerable<span class="token operator">&lt;</span>IError<span class="token operator">></span> errors<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ... your code</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="how-to-subscribe"></a><a href="#how-to-subscribe" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to subscribe</h2>
<p>In order to subscribe to the <em>Hot Chocolate</em> instrumentation events, you have to create a class that implements the marker interface <code>IDiagnosticObserver</code>.</p>
<pre><code class="hljs css language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyDiagnosticObserver</span>
    <span class="token punctuation">:</span> <span class="token class-name">IDiagnosticObserver</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The observer subscribes to an event by adding a method that is annotated with the event name like the following:</p>
<pre><code class="hljs css language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyDiagnosticObserver</span>
    <span class="token punctuation">:</span> <span class="token class-name">IDiagnosticObserver</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Validation.Error"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">OnValidationError</span><span class="token punctuation">(</span>
        <span class="token class-name">IQueryContext</span> context<span class="token punctuation">,</span>
        IReadOnlyCollection<span class="token operator">&lt;</span>IError<span class="token operator">></span> errors<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// ... your code</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>When subscribing to start/stop events you also have to add the actual event method, otherwise the diagnostic source will not enable the event.</p>
<pre><code class="hljs css language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyDiagnosticObserver</span>
    <span class="token punctuation">:</span> <span class="token class-name">IDiagnosticObserver</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">OnQuery</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// This method is used to enable start/stop events for query.</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query.Start"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">BeginQueryExecute</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// ... your code</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query.Stop"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">EndQueryExecute</span><span class="token punctuation">(</span>
        <span class="token class-name">IQueryContext</span> context<span class="token punctuation">,</span>
        <span class="token class-name">IExecutionResult</span> result<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// ... your code</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>You can use the context data to pass tracing details like a custom request id between your events:</p>
<pre><code class="hljs css language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyDiagnosticObserver</span>
    <span class="token punctuation">:</span> <span class="token class-name">IDiagnosticObserver</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">OnQuery</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// This method is used to enable start/stop events for query.</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query.Start"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">BeginQueryExecute</span><span class="token punctuation">(</span><span class="token class-name">IQueryContext</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span>ContextData<span class="token punctuation">[</span><span class="token string">"TracingId"</span><span class="token punctuation">]</span> <span class="token operator">=</span> Guid<span class="token punctuation">.</span><span class="token function">NewGuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ... your code</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token class-name">DiagnosticName</span><span class="token punctuation">(</span><span class="token string">"HotChocolate.Execution.Query.Stop"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">EndQueryExecute</span><span class="token punctuation">(</span>
        <span class="token class-name">IQueryContext</span> context<span class="token punctuation">,</span>
        <span class="token class-name">IExecutionResult</span> result<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">Guid</span> tracingId <span class="token operator">=</span> <span class="token punctuation">(</span>Guid<span class="token punctuation">)</span>context<span class="token punctuation">.</span>ContextData<span class="token punctuation">[</span><span class="token string">"TracingId"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// ... your code</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>There are two ways to register the diagnostics observer with the execution engine. You can either register the observer with the executor directly through the <code>QueryExecutionBuilder</code> or you can add the diagnostic observer to your dependency injection provider.</p>
<p>Registering the observer with the <code>QueryExecutionBuilder</code> does not require any dependency injection provider, but let`s you only inject infrastructure services.</p>
<pre><code class="hljs css language-csharp">SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">MakeExecutable</span><span class="token punctuation">(</span>builder <span class="token operator">=></span> builder
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDiagnosticObserver</span><span class="token punctuation">&lt;</span><span class="token class-name">MyDiagnosticObserver</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">UseDefaultPipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>If you want to use the observer in conjunction with your dependency injection provider you can also add the observer to your services. We have added an extension method for <code>IServiceCollection</code> that mirrors the builder extension.</p>
<pre><code class="hljs css language-csharp">services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDiagnosticObserver</span><span class="token punctuation">&lt;</span><span class="token class-name">MyDiagnosticObserver</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>If you are registering the diagnostics observer with the dependency injection you have to ensure that the resulting service provider is registered with the schema.</p>
<p>If you are using our <code>AddGraphQL</code> or <code>AddStitchedSchema</code> extensions, you should be covered. In the case that you are putting everything together yourself you will need to register the service provider with your schema manually.</p>
<pre><code class="hljs css language-csharp">service<span class="token punctuation">.</span><span class="token function">AddSingleton</span><span class="token punctuation">(</span>sp <span class="token operator">=></span> SchemaBuilder<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddServices</span><span class="token punctuation">(</span>sp<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

QueryExecutionBuilder
    <span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">UseDefaultPipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Populate</span><span class="token punctuation">(</span>services<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="examples"></a><a href="#examples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h2>
<p>We have created a little example project that demonstrates how you can delegate <em>Hot Chocolate</em> events to the ASP.NET core logger API.</p>
<p><a href="https://github.com/ChilliCream/hotchocolate-examples/tree/master/Instrumentation">ASP.NET ILogger Example</a></p>
<p>We also have an implementation that we use in production that builds upon Microsoft`s ETW. This is a more complex example since there is a lot of <code>unsafe</code> code.</p>
<p><a href="https://github.com/ChilliCream/thor-client/tree/master/src/Clients/HotChocolate">ETW Example</a></p>
<h2><a class="anchor" aria-hidden="true" id="blogs"></a><a href="#blogs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Blogs</h2>
<p><a href="https://chillicream.com/blog/2019/03/19/logging-with-hotchocolate">Tracing with Hot Chocolate</a></p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2019-9-17 by Michael Staib</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/10.0.0-rc.3/stitching"><span class="arrow-prev">← </span><span>Schema Stitching</span></a><a class="docs-next button" href="/docs/10.0.0-rc.3/apollo-tracing"><span>Apollo Tracing</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#events">Events</a><ul class="toc-headings"><li><a href="#query-events">Query Events</a></li><li><a href="#parser-events">Parser Events</a></li><li><a href="#validation-events">Validation Events</a></li><li><a href="#operation-events">Operation Events</a></li><li><a href="#resolver-events">Resolver Events</a></li></ul></li><li><a href="#how-to-subscribe">How to subscribe</a></li><li><a href="#examples">Examples</a></li><li><a href="#blogs">Blogs</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/signet.svg" alt="Hot Chocolate" width="64" height="64"/></a><div><h5>Docs</h5><a href="/docs/introduction.html">Quickstart</a><a href="/docs/code-first.html">Code-First</a><a href="/docs/options.html">General</a></div><div><h5>Examples</h5><a href="/docs/example-star-wars-code-first.html">Star Wars</a></div><div><h5>Community</h5><a href="https://join.slack.com/t/hotchocolategraphql/shared_invite/enQtNTA4NjA0ODYwOTQ0LTViMzA2MTM4OWYwYjIxYzViYmM0YmZhYjdiNzBjOTg2ZmU1YmMwNDZiYjUyZWZlMzNiMTk1OWUxNWZhMzQwY2Q" target="_blank" rel="noreferrer noopener">Join us on Slack</a><a href="https://twitter.com/Chilli_Cream" target="_blank" rel="noreferrer noopener">Follow us on Twitter</a><a href="http://stackoverflow.com/questions/tagged/hotchocolate" target="_blank" rel="noreferrer noopener">Stack Overflow</a></div><div><h5>More</h5><a href="https://chillicream.com/blog" target="_blank">Blog</a><a href="https://github.com/ChilliCream/hotchocolate" target="_blank">GitHub</a><a href="https://github.com/ChilliCream/hotchocolate/issues" target="_blank">Issues</a><a class="github-button" href="https://github.com/ChilliCream/hotchocolate" data-icon="octicon-star" data-count-href="/chillicream/hotchocolate/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 <a href="https://chillicream.com" target="_blank">ChilliCream</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '47d61652587888cd5144dcdd6fb9117b',
                indexName: 'hotchocolate',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:en","version:10.0.0-rc.3"]}
              });
            </script></body></html>