<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Resolvers · Hot Chocolate</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;When you have started building your schema with code-first you might at first not see much about field resolvers although each field of each object type has an explicit field resolver that basically resolves the value from an object instance when a query is executed.&lt;/p&gt;
"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Resolvers · Hot Chocolate"/><meta property="og:type" content="website"/><meta property="og:url" content="https://hotchocolate.io/index.html"/><meta property="og:description" content="&lt;p&gt;When you have started building your schema with code-first you might at first not see much about field resolvers although each field of each object type has an explicit field resolver that basically resolves the value from an object instance when a query is executed.&lt;/p&gt;
"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://hotchocolate.io/img/cupcake.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atelier-dune-light.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-72800164-3', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster:700,400"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/signet.svg" alt="Hot Chocolate"/><h2 class="headerTitleWithLogo">Hot Chocolate</h2></a><a href="/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/next/introduction" target="_self">Docs</a></li><li class=""><a href="/docs/next/example-star-wars-code-first" target="_self">Examples</a></li><li class=""><a href="https://chillicream.com/blog" target="_blank">Blog</a></li><li class=""><a href="https://github.com/ChilliCream/hotchocolate" target="_blank">GitHub</a></li><li class=""><a target="_self"></a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/docs/next/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/code-first">Code-first</a></li><li class="navListItem"><a class="navItem" href="/docs/next/schema-first">Schema-first</a></li><li class="navListItem"><a class="navItem" href="/docs/next/dotnet-cli">.NET CLI</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/docs/next/options">Options</a></li><li class="navListItem"><a class="navItem" href="/docs/next/dependency-injection">Dependency Injection</a></li><li class="navListItem"><a class="navItem" href="/docs/next/custom-scalar-types">Custom Scalar Types.</a></li><li class="navListItem"><a class="navItem" href="/docs/next/authorization">Authorization</a></li><li class="navListItem"><a class="navItem" href="/docs/next/dataloaders">DataLoaders</a></li><li class="navListItem"><a class="navItem" href="/docs/next/aspnet">ASP.net</a></li><li class="navListItem"><a class="navItem" href="/docs/next/parser">Parser</a></li><li class="navListItem"><a class="navItem" href="/docs/next/pagination">Pagination</a></li><li class="navListItem"><a class="navItem" href="/docs/next/middleware">Middleware</a></li><li class="navListItem"><a class="navItem" href="/docs/next/error-filter">Error Filter</a></li><li class="navListItem"><a class="navItem" href="/docs/next/security">Security</a></li><li class="navListItem"><a class="navItem" href="/docs/next/validation-rule">Validation Rules</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Guides</h3><ul><li class="navListItem"><a class="navItem" href="/docs/next/code-first-introduction">Introduction</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/next/code-first-resolvers">Resolvers</a></li><li class="navListItem"><a class="navItem" href="/docs/next/code-first-object-type">Object Type</a></li><li class="navListItem"><a class="navItem" href="/docs/next/code-first-interface-type">Interface Type</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/ChilliCream/hotchocolate-docs/edit/master/docs/code-first-resolvers.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Resolvers</h1></header><article><div><span><p>When you have started building your schema with code-first you might at first not see much about field resolvers although each field of each object type has an explicit field resolver that basically resolves the value from an object instance when a query is executed.</p>
<p>The field resolvers for your types are generated when your schema is being created.</p>
<p>Most of the time you will have your first contact with field resolvers when you start adding fields that do not have a representation in one of your .net types.</p>
<p>Lets start with a simple example and assume we have a Person type that has a property <code>Name</code> and a list of strings called <code>FriendIds</code>.</p>
<pre><code class="hljs css language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> List&lt;<span class="hljs-keyword">string</span>&gt; FriendIds { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}
</code></pre>
<p>In our GraphQL schema we do not want to deal with ID`s or anything. So our GraphQL schema should look like the follwoing:</p>
<pre><code class="hljs css language-GraphQL">type Query {
    me: Person
}
<span class="hljs-built_in">
type </span>Person {
    name: String
    friends: [Person]
}
</code></pre>
<p>This will let us drill into the friends and their friends and so on very nicely.</p>
<p>Now lets tell our schema how the .net type translates to our desired schema:</p>
<pre><code class="hljs css language-csharp">public class PersonType : ObjectType&lt;Person&gt;
{
    protected override void Configure(IObjectDescriptor&lt;Person&gt; desc)
    {
        desc.Field(t =&gt; t.FriendIds).Ignore();
        desc.Field("friends").Resolver(
            ctx =&gt; ctx.Service&lt;IPersonRepository&gt;()
                .GetFriends(ctx.Parent&lt;Person&gt;().FriendIds));
    }
}
</code></pre>
<p>The first thing we did was to ignore our <code>FriendIds</code> property so that this property would not show up in our schema. The second thing is that we added a field name and associated this field name with a resolver. A field resolver is represented as a delegate that can access a resolver context that holds the execution context for this specific field. The type of the field is inferred from the resolver result but can also be specified explicitly.</p>
<p>Another way to specify a resolver more cleanly is to add a method to your <code>Person</code> type. Since all members are resolvers we can specify a method in our class and the method arguments are injected from the resolver context.</p>
<p>Let me give you an example for that:</p>
<pre><code class="hljs css language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> List&lt;<span class="hljs-keyword">string</span>&gt; FriendIds { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-keyword">public</span> Task&lt;IEnumerable&lt;Person&gt;&gt; GetFriends([Service]IPersonRepository repository)
    {
        <span class="hljs-keyword">return</span> repository.GetFriendsAsync(FriendIds);
    }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="resolver-types"></a><a href="#resolver-types" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resolver Types</h2>
<p>Since the above solution would mess up your clean .net type we could also bind our resolver to a different type that contains our resolver method.</p>
<pre><code class="hljs css language-csharp">public class PersonResolver
{
    public Task&lt;IEnumerable&lt;Person&gt;&gt; GetFriends(Person person, [Service]IPersonRepository repository)
    {
        return repository.GetFriendsAsync(person.FriendIds);
    }
}

public class PersonType : ObjectType&lt;Person&gt;
{
    protected override void Configure(IObjectDescriptor&lt;Person&gt; desc)
    {
        desc.Field(t =&gt; t.FriendIds).Ignore();
        desc.Field&lt;PersonResolver&gt;(t =&gt; t.GetFriends(default, default));
    }
}
</code></pre>
<p>The <code>PersonResolver</code> instance will be resolved from your dependency injection provider. If you did not register this type with your dependency injection provider we will create it as a singleton and use this instance for each resolver request.</p>
<p>The best way to use dependency injection with resolver types is to inject dependencies as method arguments like depicted above. This way you do not have to care about the lifetime of the injected services.</p>
<p>You can basically inject anything that is accessible through the resolver context. So, if you would like to know which field is being resolved you could just add <code>FieldNode</code> as a method argument and we would inject this into the method call.</p>
<pre><code class="hljs css language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PersonResolver</span>
{
    <span class="hljs-keyword">public</span> Task&lt;IEnumerable&lt;Person&gt;&gt; GetFriends(Person person, [Service]IPersonRepository repository, FieldNode fieldSelection)
    {
        <span class="hljs-keyword">return</span> repository.GetFriendsAsync(person.FriendIds);
    }
}
</code></pre>
<p>Or, if you want to have access to the complete resolver context specify an argument of the type <code>IResolverContext</code>.</p>
<p>Moreover, if you specify arguments that are registered as <code>InputObjectType</code> or some other arguments that we do not recognise we will treat these as field arguments.</p>
<pre><code class="hljs css language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PersonResolvers</span>
{
    <span class="hljs-keyword">public</span> Task&lt;IEnumerable&lt;Person&gt;&gt; GetFriends(<span class="hljs-keyword">string</span> name, Person person, [Service]IPersonRepository repository)
    {
        <span class="hljs-keyword">return</span> repository.GetFriendsAsync(person.FriendIds);
    }
}
</code></pre>
<p>The above resolver signature would change now our schema since name would become a field argument:</p>
<pre><code class="hljs css language-GraphQL"><span class="hljs-selector-tag">type</span> <span class="hljs-selector-tag">Person</span> {
    <span class="hljs-attribute">name</span>: String
    <span class="hljs-built_in">friends</span>(name: String): [Person]
}
</code></pre>
<p>Resolver types can also be used as common resolvers where you share resolver logic between related types.</p>
<h2><a class="anchor" aria-hidden="true" id="resolver-context"></a><a href="#resolver-context" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resolver Context</h2>
<p>The resolver context represents the execution context for a specific field that is being resolved.</p>
<table>
<thead>
<tr><th>Member</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Schema</td><td>ISchema</td><td>The GraphQL schema.</td></tr>
<tr><td>ObjectType</td><td>ObjectType</td><td>The object type on which the field resolver is being executed.</td></tr>
<tr><td>Field</td><td>ObjectField</td><td>The field on which the field resolver is being executed.</td></tr>
<tr><td>QueryDocument</td><td>DocumentNode</td><td>The query that is being executed.</td></tr>
<tr><td>Operation</td><td>OperationDefinitionNode</td><td>The operation from the query that is being executed.</td></tr>
<tr><td>FieldSelection</td><td>FieldNode</td><td>The field selection for which a field resolver is being executed.</td></tr>
<tr><td>Source</td><td>ImmutableStack&lt;object&gt;</td><td>The source stack contains all previous resolver results of the current execution path</td></tr>
<tr><td>Path</td><td>Path</td><td>The current execution path.</td></tr>
<tr><td>Parent&lt;T&gt;()</td><td>T</td><td>Gets the previous (parent) resolver result.</td></tr>
<tr><td>Argument&lt;T&gt;(string name)</td><td>T</td><td>Gets a specific field argument.</td></tr>
<tr><td>Service&lt;T&gt;()</td><td>T</td><td>Gets as specific service from the dependency injection container.</td></tr>
<tr><td>CustomContext&lt;T&gt;()</td><td>T</td><td>Gets a specific custom context object that can be used to build up a state.</td></tr>
<tr><td>DataLoader&lt;T&gt;(string key)</td><td>T</td><td>Gets a specific DataLoader.</td></tr>
</tbody>
</table>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2018-11-22 by Alexandr Shestakov</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/next/code-first-introduction"><span class="arrow-prev">← </span><span>Introduction</span></a><a class="docs-next button" href="/docs/next/code-first-object-type"><span>Object Type</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#resolver-types">Resolver Types</a></li><li><a href="#resolver-context">Resolver Context</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/signet.svg" alt="Hot Chocolate" width="64" height="64"/></a><div><h5>Docs</h5><a href="/docs/introduction.html">Quickstart</a><a href="/docs/code-first-introduction.html">Code-First</a><a href="/docs/options.html">General</a></div><div><h5>Examples</h5><a href="/docs/example-star-wars-code-first.html">Star Wars</a></div><div><h5>Community</h5><a href="https://twitter.com/Chilli_Cream" target="_blank" rel="noreferrer noopener">Follow us on Twitter</a><a href="http://stackoverflow.com/questions/tagged/hotchocolate" target="_blank" rel="noreferrer noopener">Stack Overflow</a></div><div><h5>More</h5><a href="https://chillicream.com/blog" target="_blank">Blog</a><a href="https://github.com/ChilliCream/hotchocolate" target="_blank">GitHub</a><a href="https://github.com/ChilliCream/hotchocolate/issues" target="_blank">Issues</a><a class="github-button" href="https://github.com/ChilliCream/hotchocolate" data-icon="octicon-star" data-count-href="/chillicream/hotchocolate/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2018 <a href="https://chillicream.com" target="_blank">ChilliCream</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '47d61652587888cd5144dcdd6fb9117b',
                indexName: 'hotchocolate',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:en","version:next"]}
              });
            </script></body></html>